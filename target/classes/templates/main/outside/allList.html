<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="/common/common_head::commonHeader('首页')"></head>
<body>
<div th:include="/common/common_head::onloadJs" ></div>
<table id="dg" class="easyui-datagrid" layoutH="0" style="width:auto;height:100%;" 
			url="/hgerp/product/getAllList" method="get" idField="id"
			data-options="loadMsg: '正在加载，请稍候...',pagination:true,pageSize:200,pageList: [100,200,500,1000],toolbar:'#tb'"
			rownumbers="true" fit="true" singleSelect="false" showRefresh="true">
		<thead frozen="true">
			<tr>
				<th data-options="field:'ck',checkbox:true"></th>
				<th data-options="field:'serial_num',width:120">锻件编号</th>
				<th data-options="field:'order_num',width:60">序号</th>
			</tr>
		</thead>
		<thead>
			<tr><th data-options="field:'rough_maching_out_com',width:120">粗加工外协单位</th>
			    <th data-options="field:'rough_maching_out_remark',width:120">粗加工备注</th>
			    <th data-options="field:'rough_maching_weight',width:100">重量</th>
				<th data-options="field:'rough_maching_in_date',width:100">粗加工转入</th>
				<th data-options="field:'rough_maching_out_date',width:100">粗加工转出</th>
				<th data-options="field:'delivery_out_com',width:120">交货加工外协单位</th>
			    <th data-options="field:'delivery_out_remark',width:120">交货加工备注</th>
				<th data-options="field:'delivery_in_date',width:80">交货加工入</th>
				<th data-options="field:'delivery_out_date',width:80">交货加工出</th>
				<th data-options="field:'half_finish_out_com',width:120">半精加工外协单位</th>
			    <th data-options="field:'half_finish_out_remark',width:120">半精加工备注</th>
				<th data-options="field:'half_finish_maching_in_date',width:80">半精加工入</th>
				<th data-options="field:'half_finish_maching_out_date',width:80">半精加工出</th>
				<th data-options="field:'finish_maching_out_com',width:120">精加工外协单位</th>
			    <th data-options="field:'finish_maching_out_remark',width:120">精加工备注</th>
				<th data-options="field:'finish_maching_in_date',width:80">精加工入</th>
				<th data-options="field:'finish_maching_out_date',width:80">精加工出</th>
			    <th data-options="field:'remarksa',width:80">备注1</th>
				<th data-options="field:'remarksb',width:80">备注2</th>
				<th data-options="field:'material',width:80">材质</th>
				<th data-options="field:'grade',width:50">等级</th>
			    <th data-options="field:'sizea',width:30"></th>
				<th data-options="field:'sizeb',width:50"></th>
				<th data-options="field:'sizec',width:30"></th>
				<th data-options="field:'sized',width:50"></th>
				<th data-options="field:'sizee',width:30"></th>
				<th data-options="field:'sizef',width:50"></th>
				<th data-options="field:'sizeg',width:30"></th>
				<th data-options="field:'sizeh',width:50"></th>
			    <th data-options="field:'po_qty',width:80">订单总数</th>
				<th data-options="field:'blank_weight',width:70">下料重</th>
				<th data-options="field:'qty',width:70">生产数量</th>
				<th data-options="field:'description',width:100">说明</th>
				<th data-options="field:'quality_require',width:100">质量要求</th>
				<th data-options="field:'ndt_require',width:100">探伤要求</th>
				<th data-options="field:'delivery_state',width:100">交货状态</th>
				<th data-options="field:'ht_require',width:80">热处理要求</th>
				<th data-options="field:'ht_requireb',width:100"></th>
				<th data-options="field:'hdns_require',width:100">硬度要求</th>
				<th data-options="field:'next_process',width:100">后续工序</th>
				<th data-options="field:'other_require',width:100">其他要求</th>
				<th data-options="field:'forging_equip',width:100">锻造工艺设备</th>
				<th data-options="field:'material_num',width:100">物料号</th>
				<th data-options="field:'dwg_num',width:100">图号</th>
				<th data-options="field:'product_num',width:80">生产编号</th>
				<th data-options="field:'code',width:40">代号</th>
				<th data-options="field:'po_num',width:60">合同编号</th>
				<th data-options="field:'po_date',width:70">合同交货期</th>
				<th data-options="field:'po_update_date',width:70">更改交货期</th>
			</tr>
		</thead>
	</table>
	
	<div id="tb" style="height:auto,padding:5px;">
	   <input type="hidden" id="type" th:value="${type}" />
		<div style="margin:5px">
			<input class="easyui-textbox" data-options="prompt:'锻件编号'" style="width:120px;height:32px" id="serialNum" />
			<input class="easyui-textbox" data-options="prompt:'序号'" style="width:60px;height:32px" id="orderNum" />  
			<input class="easyui-textbox" data-options="prompt:'材质'" style="width:100px;height:32px" id="material" /> 
			<select class="easyui-combobox" style="width: 120px;" id="processId">
		   <option value="">空</option>
		   <option value="7">粗加工</option>
		   <option value="9">交货加工</option>
		   <option value="11">半精加工</option>
		   <option value="12">精加工</option>
		   </select>
		   <input class="easyui-textbox" data-options="prompt:'备注'" style="width:100px;height:32px" id="remark" /> 
			<input class="easyui-textbox" data-options="prompt:'外协单位'" style="width:100px;height:32px" id="outCom" /> 
		   <input class="easyui-datebox" data-options="prompt:'转入日期'" style="width:120px;height:32px" id="startDate" /> 
		   <input class="easyui-datebox" data-options="prompt:'转出日期'" style="width:120px;height:32px" id="endDate" /> 
			<a href="javascript:;" class="easyui-linkbutton searchBtn" onclick="doSearch()" data-options="iconCls:'icon-reload'" style="width:60px">检索</a>
		</div>
	</div>
<script type="text/javascript">
	  /*<![CDATA[*/
	  function formatterstate(val,row){
	     if(row.state==4){
	       return "<span style='font-weight:600'>"+val+"(检验)</span>";
	     }
	     if(row.state==6){
	       return "<span style='background:green;color:white;font-weight:600'>待入库</span>";
	     }
	     if(row.state==9){
	       return "<span style='background:green;color:white;font-weight:600'>已入库</span>";
	     }
	     if(row.state==10){
	       return "<span style='font-weight:600'>"+val+"(外协)</span>";
	     }
	     if(row.state==11){
	       return "<span style='font-weight:600'>"+val+"(调度)</span>";
	     }
	     return "<span style='font-weight:600'>"+val+"</span>";
	  }
	  
	    function cellStyler(value,row,index){
			if (value){
				return 'background-color:#eee;color:red;';
			}
		}
	  
	  function doSearch() {
			$('#dg').datagrid('load', {
				serialNum : $("#serialNum").val(),
				orderNum : $("#orderNum").val(),
				processId : $("#processId").val(),
				startDate : $("#startDate").val(),
				endDate : $("#endDate").val(),
				material : $("#material").val(),
				remark : $("#remark").val(),
				outCom : $("#outCom").val()
			});
			$('#dg').datagrid('clearSelections');
		}
  
  		$(function (){
		   $('#dg').datagrid({
		     rowStyler:function(index,row){
			   if (row.iscp == 1){
				  return 'background-color:pink;color:blue;';
			  }
		    }
	      });
		})
		
		/*]]>*/
</script>
</body>
</html>